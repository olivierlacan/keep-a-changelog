<!DOCTYPE html> <html lang='zh-CN'> <head> <meta charset='utf-8'> <meta content='IE=edge' http-equiv='X-UA-Compatible'> <meta content='width=device-width, initial-scale=1.0' name='viewport'> <meta content='如何维护更新日志' name='description'> <meta content='https://www.facebook.com/olivier.lacan.5' property='og:article:publisher'> <meta content='如何维护更新日志' property='og:title'> <meta content='article' property='og:type'> <meta content='https://keepachangelog.com/zh-CN/0.3.0/' property='og:url'> <meta content='如何维护更新日志' property='og:description'> <meta content='/assets/images/logo-fe0986a5.png' property='og:image'> <link href='/assets/images/favicon.ico' rel='shortcut icon' type='image/x-icon'> <link href='https://keepachangelog.com/zh-CN/0.3.0/' rel='canonical'> <title>如何维护更新日志</title> <link href='https://fonts.googleapis.com' rel='preconnect'> <link crossorigin='true' href='https://fonts.gstatic.com' rel='preconnect'> <link href="//fonts.googleapis.com/css?family=Muli:400,700&amp;display=swap" rel="stylesheet"/> <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700&amp;display=swap" rel="stylesheet"/> <link href="/assets/stylesheets/legacy-8d0d490e.css" rel="stylesheet"/> <script src="/assets/javascripts/all-08023a74.js" defer="defer"></script> </head> <body> <article> <header> <div class='newer'> There is a newer version available: <a href="/zh-CN/1.1.0">简体中文 1.1.0</a> </div> <nav class='locales' role='navigation'> <label for='language-select' title='Pick one of the 28 translations'>Language: </label> <select id='language-select' name='language'> <option label='1.0.0 العربية' value='ar'> 1.0.0 العربية </option> <option label='1.1.0 Čeština' value='cs'> 1.1.0 Čeština </option> <option label='1.1.0 Dansk' value='da'> 1.1.0 Dansk </option> <option label='1.1.0 Deutsch' value='de'> 1.1.0 Deutsch </option> <option label='1.1.0 English' value='en'> 1.1.0 English </option> <option label='1.1.0 Español' value='es-ES'> 1.1.0 Español </option> <option label='1.1.0 Français' value='fr'> 1.1.0 Français </option> <option label='1.0.0 Hrvatski' value='hr'> 1.0.0 Hrvatski </option> <option label='1.0.0 Indonesia' value='id-ID'> 1.0.0 Indonesia </option> <option label='1.1.0 Italiano' value='it-IT'> 1.1.0 Italiano </option> <option label='1.1.0 日本語' value='ja'> 1.1.0 日本語 </option> <option label='1.1.0 Norsk (Bokmål)' value='nb'> 1.1.0 Norsk (Bokmål) </option> <option label='1.1.0 Nederlands' value='nl'> 1.1.0 Nederlands </option> <option label='1.1.0 polski' value='pl'> 1.1.0 polski </option> <option label='1.1.0 Português do Brasil' value='pt-BR'> 1.1.0 Português do Brasil </option> <option label='1.1.0 română' value='ro'> 1.1.0 română </option> <option label='1.1.0 Pyccкий' value='ru'> 1.1.0 Pyccкий </option> <option label='1.0.0 Slovenčina' value='sk'> 1.0.0 Slovenčina </option> <option label='1.0.0 ქართული' value='ka'> 1.0.0 ქართული </option> <option label='1.1.0 Slovenščina' value='sl'> 1.1.0 Slovenščina </option> <option label='1.0.0 Srpski' value='sr'> 1.0.0 Srpski </option> <option label='1.1.0 Svenska' value='sv'> 1.1.0 Svenska </option> <option label='1.1.0 Türkçe' value='tr-TR'> 1.1.0 Türkçe </option> <option label='1.1.0 Українська' value='uk'> 1.1.0 Українська </option> <option label='1.1.0 简体中文' selected value='zh-CN'> 1.1.0 简体中文 </option> <option label='1.1.0 正體中文' value='zh-TW'> 1.1.0 正體中文 </option> <option label='1.0.0 한국어' value='ko'> 1.0.0 한국어 </option> <option label='1.1.0 فارسی' value='fa'> 1.1.0 فارسی </option> </select> </nav> </header> <div class='main' role='main'> <h1>如何维护更新日志</h1> <h2>更新日志绝对不应该是git日志的堆砌物</h2> <p>Version <strong>#{current_page.metadata[:page][:version]}</strong></p> <h3>更新日志是什么？</h3> <p>更新日志（Change Log）是一个由人工编辑，以时间为倒序的列表。 这个列表记录所有版本的重大变动。</p> <pre class="changelog">#{File.read("CHANGELOG.md")}</pre> <h3>为何要提供更新日志？</h3> <p>为了让用户和开发人员更好知道每一个版本有哪些区别。</p> <h3>为何我要在乎呢？</h3> <p>因为归根结底软件是为人提供的。既然你不关心人，那么为何写软件呢？ 多少你还是要关心你的受众。</p> <p>本文档原作者和另外两个人的一个<a href="https://changelog.com/podcast/127">播客</a>向大家介绍了， 为何代码的管理者和开发者应该在乎更新日志。如果你有一小时时间和很好的英文听力本领， 不妨听听。</p> <h3>怎么定义好的更新日志</h3> <p>好问题！</p> <p>一个好的更新日志，一定满足：</p> <ul> <li>给人而不是机器写的。记住，要说人话。</li> <li>快速跳转到任意段。所以采用markdown格式</li> <li>一个版本对应一个章节。</li> <li>最新的版本在上，最老的在下面。</li> <li>所有日期采用&#39;YYYY-MM-DD&#39;这种规范。（例如北京奥运会的2008年8月8日是2008-08-08）这个是国际通用，任何语言 都能理解的，并且还被<a href="https://xkcd.com/1179/">xkcd</a>推荐呢！</li> <li>标出来是否遵守<a href="https://semver.org/lang/zh-CN/">语义化版本格式</a></li> <li>每一个软件的版本必须： <ul> <li>标明日期（要用上面说过的规范）</li> <li>标明分类（采用英文）。规范如下：</li> <li>&#39;Added&#39; 添加的新功能</li> <li>&#39;Changed&#39; 功能变更</li> <li>&#39;Deprecated&#39; 不建议使用，未来会删掉</li> <li>&#39;Removed&#39; 之前不建议使用的功能，这次真的删掉了</li> <li>&#39;Fixed&#39; 改的bug</li> <li>&#39;Security&#39; 改的有关安全相关bug</li> </ul></li> </ul> <h3>怎么尽可能减少耗费的精力？</h3> <p>永远在文档最上方提供一个&#39;Unreleased&#39; 未发布区域，来记录当前的变化。 这样作有两大意义。</p> <ul> <li>大家可以看到接下来会有什么变化</li> <li>在发布时，只要把&#39;Unreleased&#39;改为当前版本号，然后再添加一个新的&#39;Unreleased&#39;就行了</li> </ul> <h3>吐槽环节到了</h3> <p>请你一定要注意：</p> <ul> <li><strong>把git日志扔到更新日志里。</strong>看似有用，然并卵。</li> <li><strong>不写&#39;deprecations&#39;就删功能。</strong>不带这样坑队友的。</li> <li><strong>采用各种不靠谱日期格式</strong> 2012年12月12日，也就中国人能看懂了。</li> </ul> <p>如果你还有要吐槽的，欢迎留<a href="https://github.com/olivierlacan/keep-a-changelog/issues">issue</a>或者直接PR</p> <h3>世界上不是有标准的更新日志格式吗？</h3> <p>貌似GNU或者GNU NEWS还是提过些规范的，事实是它们太过简陋了。 开发有那么多种情况，采用那样的规范，确实是不太合适的。</p> <p>这个项目提供的<a href="https://github.com/olivierlacan/keep-a-changelog/blob/main/CHANGELOG.md">规范</a>是作者本人希望能够成为世界规范的。 作者不认为当前的标准足够好，而且作为一个社区，我们是有能力提供更棒的规范。 如果你对这个规范有不满的地方，不要忘记还可以<a href="https://github.com/olivierlacan/keep-a-changelog/issues">吐槽</a>呢。</p> <h3>更新日志文件名应该叫什么？</h3> <p>我们的案例中给的名字就是最好的规范：<code>CHANGELOG.md</code>，注意大小写。</p> <p>像<code>HISTORY.txt</code>, <code>HISTORY.md</code>, <code>History.md</code>, <code>NEWS.txt</code>, <code>NEWS.md</code>, <code>News.txt</code>, <code>RELEASES.txt</code>, <code>RELEASE.md</code>, <code>releases.md</code>这么 多文件名就太不统一了。</p> <p>只会让大家更难找到。</p> <h3>为何不直接记录<code>git log</code>?</h3> <p>因为git日志一定是乱糟糟的。哪怕一个最理想的由完美的程序员开发和提交的，哪怕一个 从不忘记每次提交全部文件，不写错别字，不忘记重构每一个部分，也无法保证git日志完美无瑕。 况且git日志的核心在于记录代码的演化，而更新日志则是记录最重要的变更。</p> <p>就像注释之于代码，更新日志之于git日志。前者解释<em>为什么</em>，而后者说明<em>发生了什么</em>。</p> <h3>更新日志能机器识别吗？</h3> <p>非常困难，因为有各种不同的文件格式和其它规范。</p> <p><a href="https://github.com/tech-angels/vandamme/">Vandamme</a>是一个Ruby程序（由<a href="https://gemnasium.com/">Gemnasium</a>团队制作），可以解析 好多种（但绝对不是全部）开源库的更新日志。</p> <h3>到底是CHANGELOG还是更新日志</h3> <p>CHANGELOG是文件名，更新日志是常用说法。CHANGELOG采用大写是有历史根源的。就像很多类似的文件 <a href="https://github.com/olivierlacan/keep-a-changelog/blob/main/README.md"><code>README</code></a>， <a href="https://github.com/olivierlacan/keep-a-changelog/blob/main/LICENSE"><code>LICENSE</code></a>，还有<a href="https://github.com/olivierlacan/keep-a-changelog/blob/main/CONTRIBUTING.md"><code>CONTRIBUTING</code></a>。</p> <p>采用大写可以更加显著，毕竟这是项目很重要的元信息。就像<a href="https://shields.io/">开源徽章</a>。</p> <h3>那些后来撤下的版本怎么办？</h3> <p>因为各种安全/重大bug原因被撤下的版本被标记&#39;YANKED&#39;。这些版本一般不出现在更新日志里，但作者建议他们出现。 显示方式应该是：</p> <p><code>## [0.0.5] - 2014-12-13 [YANKED]</code></p> <p><code>[YANKED]</code>采用大写更加显著，因为这个信息很重要。而采用方括号则容易被程序解析。</p> <h3>是否可以重写更新日志</h3> <p>当然。哪怕已经上线了，也可以重新更新更新日志。有许多开源项目更新日志不够新，所以作者就会帮忙更新。</p> <p>另外，很有可能你忘记记录一个重大功能更新。所以这时候应该去重写更新日志。</p> <h3>如何贡献？</h3> <p>本文档并不是<strong>真理</strong>。这只是原作者的个人建议，并且包括许多收集的例子。 哪怕<a href="https://github.com/olivierlacan/keep-a-changelog">本开源库</a>提供一个<a href="https://github.com/olivierlacan/keep-a-changelog/blob/main/CHANGELOG.md">更新日志案例</a>，我刻意没有提供一个 过于苛刻的规则列表（不像<a href="https://semver.org/lang/zh-CN/">语义化版本格式</a>）。</p> <p>这是因为我希望通过社区达到统一观点，我认为中间讨论的过程与结果一样重要。</p> <p>所以<a href="https://github.com/olivierlacan/keep-a-changelog">欢迎贡献</a>。</p> <footer class='footer clearfix' role='contentinfo'> <img src="/assets/images/keep-a-changelog-mark-f8b06a42.svg" width="30" height="30" class="mark" alt=""/> <p class='about'> This project is <a href="https://choosealicense.com/licenses/mit/">MIT Licensed</a> // <a href="https://github.com/olivierlacan/keep-a-changelog/">Created & maintained</a> by <a href="https://olivierlacan.com/">Olivier Lacan</a> <a href="https://ruby.social/@olivierlacan" rel="me" aria-label="Link to Olivier Lacan's Mastodon account"></a> // Designed by Tyler Fortune </p> </footer> </div> </article> </body> <script>
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '5389808eeddd5b055a00440d');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script> </html>